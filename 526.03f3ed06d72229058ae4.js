(self.webpackChunkconsole_frontend=self.webpackChunkconsole_frontend||[]).push([[526],{35043:(t,e,i)=>{"use strict";i.d(e,{I:()=>S});var r=i(27091),n=i(76185),o=i(26215),s=i(5304),a=i(93342);let l=(()=>{class t{constructor({endPoint:e="",sortFieldKey:i="",sortDirKey:r="",pagerPageKey:n="",pagerLimitKey:o="",filterFieldKey:s="",totalKey:a="",dataKey:l=""}={}){this.endPoint=e||"",this.sortFieldKey=i||t.SORT_FIELD_KEY,this.sortDirKey=r||t.SORT_DIR_KEY,this.pagerPageKey=n||t.PAGER_PAGE_KEY,this.pagerLimitKey=o||t.PAGER_LIMIT_KEY,this.filterFieldKey=s||t.FILTER_FIELD_KEY,this.totalKey=a||t.TOTAL_KEY,this.dataKey=l||t.DATA_KEY}}return t.SORT_FIELD_KEY="sort",t.SORT_DIR_KEY="dir",t.PAGER_PAGE_KEY="page",t.PAGER_LIMIT_KEY="size",t.FILTER_FIELD_KEY="#field#",t.TOTAL_KEY="result.totalElements",t.DATA_KEY="result.content",t})();class u{}class c extends n.zV{constructor(t,e,i={},r){super(t,i),this.http=t,this.apiService=e,this.apiStatusSubject=new o.X("init"),this.initConf=r}requestElements(){var t,e;let i=this.createRequesParams();const n=null!==(e=null===(t=null==this?void 0:this.initConf)||void 0===t?void 0:t.page)&&void 0!==e?e:1;if(n>1&&(i.has("page")&&(i=i.delete("page")),i=i.append("page",n)),"#field#"!==this.conf.filterFieldKey){const t=JSON.parse(this.conf.filterFieldKey);t&&t.length>0&&t.filter(t=>r.l.isNotBlank(t.value.toString())).forEach(t=>{i=i.append(t.key,t.value)})}return this.initConf?(this.initConf.sorts&&this.setSort(this.initConf.sorts,!1),this.initConf=void 0):this.apiStatusSubject.next("loading"),this.apiService.doGet(this.conf.endPoint,i,null,"response").pipe((0,s.K)(t=>{throw this.apiStatusSubject.next("error"),t}),(0,a.b)(t=>{var e,i,r,n;this.apiStatusSubject.next("finish");const o=null!==(n=null===(r=null===(i=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.result)||void 0===i?void 0:i.pageable)||void 0===r?void 0:r.pageNumber)&&void 0!==n?n:0;this.setPage(o+1,!1)}))}apiStatus(){return this.apiStatusSubject.asObservable()}}var d=i(79765),h=i(46782),g=i(37716),p=i(91841),v=i(15114),f=i(23918),y=i(51425);let S=(()=>{class t{constructor(t,e,i,r){this.http=t,this.loadingService=e,this.dialogService=i,this.apiService=r}searchData(t){let e=new d.xQ,i=new l({endPoint:t.apiUrl}),n=new u;t.nowPage&&(n.page=t.nowPage),(null==t?void 0:t.filters)&&(n.filters=r.l.getSearchFilters(t.filters),i.filterFieldKey=JSON.stringify(n.filters)),(null==t?void 0:t.sorts)&&(n.sorts=t.sorts);let o=new c(this.http,this.apiService,i,n);return o.apiStatus().pipe((0,h.R)(e)).subscribe(e=>{switch(e){case"error":this.dialogService.alertAndBackToList(!1,t.errMsg);break;case"finish":this.loadingService.close();break;default:this.loadingService.open()}}),o}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(p.eN),g.LFG(v.b),g.LFG(f.x),g.LFG(y.s))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},27091:(t,e,i)=>{"use strict";i.d(e,{l:()=>a});var r=i(16304),n=i(36332),o=i(16738),s=i(76185);const a={getFileExtension(t){var e;const i=null==t?void 0:t.lastIndexOf(".");return-1===i?"":null===(e=null==t?void 0:t.substring(i+1))||void 0===e?void 0:e.toLowerCase()},getFileNameWithoutExtension(t){const e=null==t?void 0:t.lastIndexOf(".");return-1!==e?null==t?void 0:t.substring(0,e):t},convertFileToBase64:t=>new Promise((e,i)=>{const r=new FileReader;r.onload=t=>{var r,n,o;const s=null===(o=null===(n=null===(r=t.target)||void 0===r?void 0:r.result)||void 0===n?void 0:n.toString())||void 0===o?void 0:o.split(",")[1];s?e(s):i(new Error("\u8f49\u63db\u70baBase64\u6642\u767c\u751f\u932f\u8aa4"))},r.onerror=t=>{i(t)},r.readAsDataURL(t)}),getActionName(t){switch(t){case"edit":return"\u7de8\u8f2f";case"copy":return"\u8907\u88fd";default:return"\u65b0\u589e"}},getFirstFormContorlError:t=>t?Object.keys(t)[0]:"",getDateStringByMoment:t=>o.isMoment(t)?t.year().toString().padStart(4,"0")+(t.month()+1).toString().padStart(2,"0")+t.date().toString().padStart(2,"0"):t+"",isBlank:t=>null==t||""===String(t).trim(),isNotBlank(t){return!this.isBlank(t)},toViewDateString(t){const e=/^(\d{4})(\d{2})(\d{2})$/;return e.test(t)?t.replace(e,"$1/$2/$3"):t},compareObj(t,e){const i={};return Object.keys(t).map(r=>{i[r]=!(!t[r]||!e[r])&&t[r]===e[r]}),i},groupBy(t,e,i){let r=void 0===i||i;return t.reduce(function(t,i){let n=Object.assign({},i);return r||delete n[e],(t[i[e]]=t[i[e]]||[]).push(n),t},{})},flatGroupItem(t,e){let i=[];return Object.keys(t).forEach(r=>{let n=t[r].reduce(function(t,i){return t[e]=r,Object.entries(i).forEach(([e,i])=>t[e]=i),t},{});i.push(n)}),i},getHistoryProcessData(t,e){if(e){if(!e[t])return null;let i=JSON.parse(JSON.stringify(e)),r={};return e[t].length>0&&(i.historyGroupView={}),e[t].forEach(t=>{i.historyGroupView&&i.historyGroupView[t.groupId]?i.historyGroupView[t.groupId].flows.push({time:t.time,title:t.title,detail:t.detail}):(r[t.groupId]=!0,i.historyGroupView[t.groupId]={type:t.type,flows:[{time:t.time,title:t.title,detail:t.detail}]})}),{isHistoryOpen:r,detail:i}}return null},getFormGroupInFormArray:(t,e,i)=>t.get(e).at(i),getSearchFilters:t=>Object.keys(t).filter(e=>a.isNotBlank(t[e])).map(e=>({key:e,value:"startDate"===e||"endDate"===e?o(t[e]).format("YYYY-MM-DD"):t[e]})),initializeFormWithSessionData(t,e){(null==e?void 0:e.filter)&&Object.keys(e.filter).forEach(i=>{const r=t.controls[i];let n=!e.filter[i]||"startDate"!==i&&"endDate"!==i?e.filter[i]:new Date(e.filter[i]);r&&r.patchValue(n)})},removeLastCharIfEquals(t,e){if(!t||!e)return t;const i=new RegExp(`${e}+[^${e}]*$`);return t.replace(i,"")},onSetTempPageIsAllSelected(t,e,i){const r=t.findIndex(t=>t.pageNum===e);return-1===r?t.push({pageNum:e,val:i}):t[r].val=i,t},onSetGridPageChecked:(t,e,i,n)=>(0,r.Z)(function*(){if(!(e instanceof s.nC))return new Array;const r=yield e.getElements(),o=new Set(r.filter(t=>(null==t?void 0:t.isShow)&&(null==t?void 0:t.isSelected)).map(e=>e[t]));return n?r.filter(e=>e[t]&&(null==e?void 0:e.isShow)).forEach(e=>{const r=e[t];o.has(r)||i.push({rowId:r})}):i=i.filter(t=>!o.has(t.rowId)),i})(),processExecutionFrequency(t,e){var i,r,o,s,a,l,u,c;let d="";if(this.isBlank(t)||this.isBlank(e))return d;const h=e.split(/[:\uff1a]/),g=null==t?void 0:t.toLowerCase();switch(g){case"daily":d=`${n.Di[g]} ${null!==(i=h[0])&&void 0!==i?i:""} \u6642 ${null!==(r=h[1])&&void 0!==r?r:""} \u5206`;break;case"weekly":const t=parseInt(null!==(o=h[0])&&void 0!==o?o:"0");d=`${n.Di[g]} ${n.Qo[t-1]||""} ${null!==(s=h[1])&&void 0!==s?s:""} \u6642 ${null!==(a=h[2])&&void 0!==a?a:""} \u5206`;break;case"monthly":const p="999"===(null==h?void 0:h[0])?"\u6708\u5e95":null!==(l=h[0]+"\u65e5")&&void 0!==l?l:"";d=`${n.Di[g]} ${p} ${null!==(u=h[1])&&void 0!==u?u:""} \u6642 ${null!==(c=h[2])&&void 0!==c?c:""} \u5206`;break;default:d=`${n.Di[g]} ${e}`}return d}}},11004:(t,e,i)=>{"use strict";i.d(e,{P:()=>o});var r=i(37716),n=i(51425);let o=(()=>{class t{constructor(t){this.service=t,this.tagFunc="tag-settings/",this.tagConditionFunc="tag-condition/"}getTagSettingList(){return this.service.doGet(this.tagFunc)}getTagSettingListOption(t){return this.service.doGet(this.tagFunc+"option",t)}getTagSettingRow(t){return this.service.doGet(this.tagFunc+t)}createTagSetting(t){return this.service.doPost(this.tagFunc,t)}updateTagSetting(t,e){return this.service.doPut(this.tagFunc+t,e)}getTagConditionList(){return this.service.doGet(this.tagConditionFunc)}getTagFilterConditionList(t){return this.service.doGet(this.tagConditionFunc,t)}getTagFilterConditionListOption(t){return this.service.doGet(this.tagConditionFunc+"option",t)}getTagConditionalDistribution(t){return this.service.doGet(this.tagConditionFunc+t)}getTagCategoryList(){return this.service.doGet(this.tagConditionFunc+"category/")}getTagCategoryListOption(){return this.service.doGet(this.tagConditionFunc+"category/option")}getTagSubCategoryList(t){return this.service.doGet(this.tagConditionFunc+"category/"+t)}getTagSubCategoryListOption(t){return this.service.doGet(this.tagConditionFunc+"category/"+t+"/option")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(n.s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})()},16304:(t,e,i)=>{"use strict";function r(t,e,i,r,n,o,s){try{var a=t[o](s),l=a.value}catch(u){return void i(u)}a.done?e(l):Promise.resolve(l).then(r,n)}function n(t){return function(){var e=this,i=arguments;return new Promise(function(n,o){var s=t.apply(e,i);function a(t){r(s,n,o,a,l,"next",t)}function l(t){r(s,n,o,a,l,"throw",t)}a(void 0)})}}i.d(e,{Z:()=>n})}}]);