(self.webpackChunkconsole_frontend=self.webpackChunkconsole_frontend||[]).push([[934],{75620:(e,t,i)=>{"use strict";i.d(t,{Ob:()=>c,t8:()=>u});var n=i(37716),a=i(15585),s=i(63434),r=i(38832),l=i(63423);const o={"customer-manage":{title:"\u5ba2\u7fa4\u7ba1\u7406",icon:"people-outline",children:[]},"review-manage":{title:"\u5be9\u6838\u7ba1\u7406",icon:"checkmark-square-outline",children:[]},"schedule-manage":{title:"\u6392\u7a0b\u7ba1\u7406",icon:"file-text-outline",children:[]},"account-manage":{title:"\u5e33\u865f\u7ba1\u7406",icon:"lock-outline",children:[]}},c={dashboard:{crud:["read"],menu:{title:"\u5100\u8868\u677f",icon:"pie-chart-outline",link:"/pages/dashboard/dashboard-room"}},customer:{crud:["read"],menu:{title:"\u7528\u6236\u5217\u8868",link:"/pages/customer-manage/customer-list"},parentMenu:"customer-manage"},activity:{crud:["read","create","update","delete"],menu:{title:"\u5ba2\u7fa4\u6d3b\u52d5\u540d\u55ae",link:"/pages/customer-manage/activity-list"},parentMenu:"customer-manage"},tag:{crud:["read","create","update","delete"],menu:{title:"\u6a19\u7c64\u7ba1\u7406",icon:"pricetags-outline",link:"/pages/tag-manage/tag-list"}},"review-tag":{crud:["read","update"],menu:{title:"\u6a19\u7c64\u5be9\u6838",link:"/pages/review-manage/review-tag-list"},parentMenu:"review-manage"},"review-activity":{crud:["read","update"],menu:{title:"\u5ba2\u7fa4\u540d\u55ae\u5be9\u6838",link:"/pages/review-manage/review-activity-list"},parentMenu:"review-manage"},"review-schedule":{crud:["read","update"],menu:{title:"\u540d\u55ae\u6392\u7a0b\u5be9\u6838",link:"/pages/review-manage/review-schedule-list"},parentMenu:"review-manage"},"schedule-tag":{crud:["read","update"],menu:{title:"\u8cbc\u6a19\u6392\u7a0b",link:"/pages/schedule-manage/schedule-tag-list"},parentMenu:"schedule-manage"},"schedule-activity":{crud:["read","create","update","delete"],menu:{title:"\u540d\u55ae\u6392\u7a0b",link:"/pages/schedule-manage/schedule-activity-list"},parentMenu:"schedule-manage"},"console-user":{crud:["read","update"],menu:{title:"\u4f7f\u7528\u8005\u7ba1\u7406",link:"/pages/account-manage/console-user-list"},parentMenu:"account-manage"},"console-group":{crud:["read","create","update","delete"],menu:{title:"\u6b0a\u9650\u7ba1\u7406",link:"/pages/account-manage/console-group-list"},parentMenu:"account-manage"}};let u=(()=>{class e{constructor(e){this.loginSerivce=e,this.basicMenu=[]}ngOnInit(){this.initMenu()}initMenu(){this.basicMenu=[{title:"\u767b\u5165\u756b\u9762",icon:"log-in-outline",link:"/login",home:!0},{title:"\u5143\u4ef6\u5eab",icon:"color-palette-outline",children:[{title:"\u57fa\u672c\u5143\u4ef6",link:"/pages/element"},{title:"\u8868\u55ae\u5143\u4ef6",link:"/pages/element2"},{title:"\u8868\u683c",link:"/pages/table"},{title:"Echarts\u5716\u8868\u5167\u5bb9",link:"/pages/charts/echarts"}]}];for(const[e,t]of Object.entries(c))if(this.loginSerivce.checkUserScope(e))if(t.parentMenu){let e=this.basicMenu.find(e=>e.title===o[t.parentMenu].title);e?e.children.push(t.menu):(o[t.parentMenu].children.push(t.menu),this.basicMenu.push(o[t.parentMenu]))}else this.basicMenu.push(t.menu)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(a.r))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(n.TgZ(0,"ngx-column-layout"),n._UZ(1,"nb-menu",0),n._UZ(2,"router-outlet"),n.qZA()),2&e&&(n.xp6(1),n.Q6J("items",t.basicMenu))},directives:[s.a,r.mBz,l.lC],styles:[""]}),e})()},934:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PagesModule:()=>v});var n=i(75620),a=i(37716),s=i(15585),r=i(63423),l=i(54856),o=i(11470);let c=(()=>{class e{constructor(e,t,i,n){this.loginService=e,this.router=t,this.storageService=i,this.configService=n}canActivate(e,t){return!(!this.configService.getConfig().IS_MOCK&&!this.storageService.getSessionVal("jwtToken")&&(this.router.navigate([""]),1))}canActivateChild(e,t){if(!this.configService.getConfig().IS_MOCK&&!this.storageService.getSessionVal("jwtToken"))return this.router.navigate([""]),!1;const i=e.routeConfig.path;if(i&&!e.routeConfig.children){let e=i.split("-").length<3?i.slice(0,i.lastIndexOf("-")):i.split("-").slice(0,2).join("-");if(void 0!==Object.keys(n.Ob).find(t=>t===e))return this.loginService.setSchema(e),i.includes("set/:")||t.url.includes("/edit/")?this.loginService.checkUserScope(e,"update"):i.includes("set")||t.url.includes("/copy/")?this.loginService.checkUserScope(e,"create"):this.loginService.checkUserScope(e,"read");throw new Error(`schemaName:${e} \u7121\u5c0d\u61c9\u7684\u6b0a\u9650\u8a2d\u5b9a`)}return!0}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.r),a.LFG(r.F0),a.LFG(l.V),a.LFG(o.E))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();var u=i(45435);let h=(()=>{class e{constructor(e,t){this.storage=e,this.router=t,this.keepSessionPathList=[],this.sessionKeyList=[],t.events.pipe((0,u.h)(e=>e instanceof r.m2)).subscribe(e=>{this.previousUrl=e.url})}canActivateChild(e,t){var i,n;const a=e.routeConfig.path,s=e.routeConfig.children,r="/"+e.pathFromRoot.filter(e=>e.url.length>0).filter((e,t)=>t<2).map(e=>e.url).map(e=>e.toString()).join("/")+"/";if(""==a&&s){let e=s.filter(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.keepSession});this.sessionKeyList=e.map(e=>e.path),this.keepSessionPathList=[],this.keepSessionPathList=e.map(e=>e.path.includes("/")?r+e.path.split("/")[0]:r+e.path)}return(null===(i=e.routeConfig.data)||void 0===i?void 0:i.keepFrom)&&(this.keepSessionPathList=[],this.keepSessionPathList.push(r+a),null===(n=e.routeConfig.data)||void 0===n||n.keepFrom.forEach(e=>{this.keepSessionPathList.push(r+e)})),this.previousUrl&&this.keepSessionPathList.some(e=>this.previousUrl.includes(e))||this.sessionKeyList.forEach(e=>{this.storage.removeSessionVal(e)}),!0}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(l.V),a.LFG(r.F0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();var d=i(38832),p=i(86794);const g=[{path:"",component:n.t8,canActivate:[c],children:[{path:"element",loadChildren:()=>Promise.all([i.e(440),i.e(199)]).then(i.bind(i,15199)).then(e=>e.ElementPageModule)},{path:"element2",loadChildren:()=>Promise.all([i.e(440),i.e(347)]).then(i.bind(i,10347)).then(e=>e.Element2PageModule)},{path:"table",loadChildren:()=>Promise.all([i.e(185),i.e(887)]).then(i.bind(i,84887)).then(e=>e.TablePageModule)},{path:"dashboard",loadChildren:()=>Promise.all([i.e(185),i.e(48),i.e(104),i.e(1)]).then(i.bind(i,62001)).then(e=>e.DashboardModule),canActivateChild:[h,c]},{path:"customer-manage",loadChildren:()=>Promise.all([i.e(185),i.e(738),i.e(48),i.e(104),i.e(526),i.e(575),i.e(636),i.e(592),i.e(377)]).then(i.bind(i,64377)).then(e=>e.CustomerManageModule),canActivateChild:[h,c]},{path:"tag-manage",loadChildren:()=>Promise.all([i.e(185),i.e(738),i.e(48),i.e(104),i.e(526),i.e(575),i.e(843),i.e(592),i.e(410)]).then(i.bind(i,57410)).then(e=>e.TagManageModule),canActivateChild:[h,c]},{path:"review-manage",loadChildren:()=>Promise.all([i.e(185),i.e(738),i.e(48),i.e(526),i.e(575),i.e(843),i.e(592),i.e(189)]).then(i.bind(i,42189)).then(e=>e.ReviewManageModule),canActivateChild:[h,c]},{path:"account-manage",loadChildren:()=>Promise.all([i.e(185),i.e(738),i.e(48),i.e(606)]).then(i.bind(i,89606)).then(e=>e.AccountManageModule),canActivateChild:[h,c]},{path:"schedule-manage",loadChildren:()=>Promise.all([i.e(185),i.e(738),i.e(48),i.e(526),i.e(592),i.e(177)]).then(i.bind(i,10177)).then(e=>e.ScheduleManageModule),canActivateChild:[h,c]},{path:"charts",loadChildren:()=>Promise.all([i.e(738),i.e(104),i.e(636)]).then(i.bind(i,31636)).then(e=>e.ChartsModule)}]}];let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.Bz.forChild(g)],r.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[h,c],imports:[[p.O,m,d.j5J]]}),e})()}}]);